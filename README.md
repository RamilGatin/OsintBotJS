# OsintBotJS

___

### Описание Бота
Это бот, который по загруженной Вами фотографии лица человека помогает найти его профиль в социальной сети Вконтакте.

Пример работы бота: ![image](https://github.com/RamilGatin/OsintBotJS/assets/79932308/42971275-333c-4872-ae3f-ee115097f0fd)

---

### Стек технологий
Бот написан на Node.JS, используя node-telegram-bot-api для программирования бота и axios для работы с API.

___

## Мониторинг работы бота

### Описание компонентов подсистемы: 
Prometheus:

- Система мониторинга и сбора метрик.
- Собирает метрики о производительности и состоянии системы и приложения.
- Хранит метрики и предоставляет API для запроса метрик.

Grafana:

- Инструмент для визуализации и анализа данных мониторинга.
- Получает данные метрик из Prometheus и отображает их в виде графиков, панелей и дашбордов.

Expoter: 

- Cобирает и предоставляет метрики для систем мониторинга, таких как Prometheus.

В этом проекте я написал свой экспортер, используя библиотеку 'prom-client'

```javascript

const Prometheus = require('prom-client');
const register = Prometheus.register;

// Создание счетчика метрики для обработанных фотографий
const processedPhotosCounter = new Prometheus.Counter({
    name: 'telegram_bot_processed_photos_total',
    help: 'Total number of processed photos',
    labelNames: ['chat_id'],
});


// Регистрация метрик в реестре
register.registerMetric(processedPhotosCounter);

// HTTP-обработчик для предоставления метрик Prometheus
http.createServer(async (req, res) => {
    if (req.url === '/metrics') {
        res.setHeader('Content-Type', register.contentType);
        res.end(await register.metrics());
    } else {
        res.statusCode = 404;
        res.end('Not Found');
    }
}).listen(8080, () => {
    console.log('HTTP server is running on port 8080');
});

```
Данный код создает счетчик метрики для отслеживания обработанных фотографий, регистрирует эту метрику в реестре Prometheus и предоставляет метрики Prometheus через HTTP-обработчик, доступный по пути "/metrics" на порту 8080. Это позволяет Prometheus собирать и сохранять эти метрики для последующего использования в мониторинге и визуализации с помощью Grafana


### Метрики
В качестве метрики я использовал количество отправленных фотографий пользователями.

### Графики в Grafana

Пример отображения метрики (количество отправленных фотографий пользователями) ![image](https://github.com/RamilGatin/OsintBotJS/assets/79932308/21a5077a-43ad-48e2-bda7-ed2aac8c9b69)


## Инструкция по разворачиванию:

- Установите Docker на вашу систему, если это ещё не сделано. Следуйте официальной документации Docker для инструкций по установке на вашу операционную систему.

- Создайте новую папку для вашего проекта, если вы этого еще не сделали.

- Откройте терминал и перейдите в созданную папку для проекта.

- Используйте команду ```git clone``` для клонирования вашего репозитория GitHub в текущую папку.

- Убедитесь, что в корневой папке проекта находятся файлы index.js, package.json и Dockerfile.

- Соберите Docker-образ, выполнив команду ```docker build -t my-app ..``` Здесь my-app - это имя образа, вы можете выбрать любое другое имя.

- После успешной сборки образа, вы можете запустить контейнер, используя команду ``` docker run -d my-app```. В этом примере контейнер будет работать в фоновом режиме.

- Теперь ваш проект будет развернут и работает в контейнере Docker на основе исходного кода из репозитория GitHub.







